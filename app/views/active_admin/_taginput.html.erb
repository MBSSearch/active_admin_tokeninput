<% 
	autocomplete_path = self.send("autocomplete_admin_#{collection.to_s.pluralize}_path") if autocomplete_path.nil?
	belongs = false if belongs.nil?
	resource = form.object if resource.nil?

	if belongs == true
		@json = resource.send("#{collection}").to_json(:only => [:id, :name])
		#surround with [] brackets to keep tokeninput.js happy
		@json = "[#{@json}]"
		fieldName = "#{resource.class.name.underscore}[#{collection.to_s.singularize}_id]"
	else	
		@json = resource.send("#{collection}").map.to_json(:only => [:id, :name])
	end
%>

<%= form.input collection, :as => :has_many_token %>

<%# form.input collection, :as => :string, :input_html => { "data-token-limit" => 0, "data-field-name" => fieldName, "data-autocomplete-path" => autocomplete_path, "class" => "active-admin-taginput", "data-pre" => @json, "id" => "#{collection.to_s}_input", "name" => "", "value" => nil, } %>	
